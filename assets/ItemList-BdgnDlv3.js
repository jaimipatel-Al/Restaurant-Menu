import{_ as L,u as S,r as u,g as V,c as n,b as l,f as c,w as b,i,R as w,l as N,e as g,F as B,s as E,m as I,n as x,a as R,o as r,k as q,v as F,t as p,p as v}from"./index-e9uV_RJ-.js";import{_ as H}from"./default-item-BsiDVC9R.js";import{_ as M}from"./AddEditIcon-X75OXq2v.js";import{r as T}from"./NoSymbolIcon-wtQzvxs9.js";import{r as U}from"./ArrowPathIcon-D9-DHQV_.js";import{r as j}from"./PlusIcon-BmWKAcbV.js";import"./TrashIcon-1h6QmHTQ.js";const Q={class:"bg-screen"},z={class:"main-header-nav"},G={key:0,class:"no-data"},J={class:"h-72"},K=["src"],O={key:1,src:H,alt:"Item Image",class:"uploaded-image"},P={class:"p-2"},W=["for"],X=["onUpdate:modelValue","id","onChange"],Y={class:"flex-between font-semibold"},Z={class:"price"},ee={class:"text-sm font-semibold text-gray-800"},te={class:"auth-detail"},se={key:2,class:"no-data shrink w-full"},ae={__name:"ItemList",setup(le){const k=R(),$=S(),m=u(!1),d=u([]),_=u(),f=u(0),h=u(),y=async()=>{var s;((s=d.value)==null?void 0:s.length)!=h.value&&(f.value++,m.value=!0,await I.get(`${x.listItem}?page=${f.value}&limit=8`).then(({data:t})=>{const a=t.data;h.value=a.totalSubcategories;const e=a.subcategories.map(o=>({...o,isDeleting:!1}));d.value=[...d.value,...e]}).catch(t=>{var a,e;console.error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}).finally(()=>{m.value=!1}))},D=async s=>{s.isDeleting=!0,await I.delete(`${x.deleteItem}${s._id}`).then(()=>{v.success("Item deleted successfully!!"),f.value=0,h.value=null,d.value=[],y()}).catch(t=>{var a,e;v.error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}).finally(()=>{s.isDeleting=!1})},A=async s=>{await I.patch(`${x.toggleItemAvailability}${s._id}`).then(()=>{v.success("Item Availability Changed successfully!!")}).catch(t=>{var a,e;v.error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)})},C=()=>{const s=_.value;s&&s.scrollHeight-s.scrollTop<=s.clientHeight+50&&!m.value&&y()};return V(()=>{y(),_.value.addEventListener("scroll",C)}),(s,t)=>{var a;return r(),n("section",Q,[l("div",z,[t[1]||(t[1]=l("h1",{class:"main-title"},"Items",-1)),c(i(w),{to:"/item/add-item",class:"add-btn"},{default:b(()=>[c(i(j)),t[0]||(t[0]=g(" Add Item"))]),_:1})]),l("div",{ref_key:"scrollComponent",ref:_,class:"h-5/6 overflow-y-auto flex justify-evenly px-4 sm:px-8 md:px-10 flex-wrap"},[((a=d.value)==null?void 0:a.length)==0&&!m.value?(r(),n("div",G,[c(i(T),{class:"no-data-icon"}),t[2]||(t[2]=g(" No Item Available "))])):(r(!0),n(B,{key:1},E(d.value,e=>(r(),n("div",{key:e,class:"p-1 sm:p-2 shadow-2xl rounded-xl w-full sm:w-80 my-2 md:my-4 lg:my-5 mx-2 md:mx-3",style:{background:"rgb(255, 255, 255, 0.8)"}},[l("div",J,[e.image&&e.image!="null"&&e.image!="undefined"?(r(),n("img",{key:0,src:e.image,alt:"Item Image",class:"uploaded-image"},null,8,K)):(r(),n("img",O))]),l("div",P,[c(M,{title:e.title,isShow:e.createdBy==i($).userData.userId,onEditItem:o=>i(k).push(`/item/edit-item/${e._id}`),onDeleteItem:o=>D(e),isDeleting:e.isDeleting},null,8,["title","isShow","onEditItem","onDeleteItem","isDeleting"]),l("label",{for:`available-${e._id}`,class:"flex items-center sm:text-sm md:text-base font-semibold"},[q(l("input",{"onUpdate:modelValue":o=>e.isActive=o,type:"checkbox",id:`available-${e._id}`,class:"w-4 h-4 cursor-pointer mr-2",onChange:o=>A(e)},null,40,X),[[F,e.isActive]]),t[3]||(t[3]=g(" Available "))],8,W),l("div",Y,[c(i(w),{to:"/category",class:"text-orange-400 text-sm"},{default:b(()=>{var o;return[g(p((o=e.categoryId)==null?void 0:o.title),1)]}),_:2},1024),l("span",Z,"â‚¹ "+p(e.price)+" /-",1)]),l("p",ee,"Quantity : "+p(e.quantity),1),l("p",te,p(e.description),1)])]))),128)),m.value?(r(),n("div",se,[c(i(U),{class:"loading-btn"}),t[4]||(t[4]=g(" Loading... "))])):N("",!0)],512)])}}},ue=L(ae,[["__scopeId","data-v-82512a43"]]);export{ue as default};
