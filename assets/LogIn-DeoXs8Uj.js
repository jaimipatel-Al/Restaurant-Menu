import{u as S,r as n,g as U,c as _,b as s,f as c,e as v,w as b,h as $,i as o,a as C,o as f,t as x,j as w,k as P,v as R,l as B,m as A,n as N,p as h}from"./index-e9uV_RJ-.js";import{c as D,a as y,F as M,b as k}from"./index.esm-DzTv-fv4.js";import{r as j,a as q}from"./EyeIcon-Dpwvfe44.js";import{r as F}from"./ArrowPathIcon-D9-DHQV_.js";const z="/Restaurant-Menu/assets/login-DBB3ECvQ.jpg",I={class:"auth flex items-center"},Y={class:"auth-box",style:{height:"600px"}},Z={class:"flex-1 pa-10"},J={class:"auth-detail"},O={class:"error-message"},Q={class:"input bg-white flex-between"},T={class:"error-message"},G={for:"remember",class:"flex items-center space-x-3 text-lg font-semibold"},H=["disabled"],ae={__name:"LogIn",setup(K){const g=S(),V=C(),E=D({Email:y().required().email(),Password:y().required().min(8).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$/,"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character")}),i=n(""),r=n(""),u=n(!1),d=n(!1),m=n(!1),L=async()=>{m.value=!0;const t={email:i.value,password:r.value};await A.post(N.login,t).then(({data:e})=>{d.value?g.sessionStore({password:t.password,email:t.email}):g.sessionRemove(),g.loginUser(e.data),h.success((e==null?void 0:e.message)??"User Login Success!"),V.push("/")}).catch(e=>{var p,a;h.error(((a=(p=e==null?void 0:e.response)==null?void 0:p.data)==null?void 0:a.message)??"User Can't Login!")}).finally(()=>{m.value=!1})};return U(()=>{const t=sessionStorage.getItem("authUser");if(t){const e=JSON.parse(t);i.value=e.email,r.value=e.password,d.value=!0}}),(t,e)=>{const p=$("RouterLink");return f(),_("main",I,[s("div",Y,[s("div",Z,[e[10]||(e[10]=s("h1",{class:"main-title"},"Login",-1)),s("p",J,[e[5]||(e[5]=v(" Doesn't have an account yet? ")),c(p,{to:"/signup",class:"route-link"},{default:b(()=>e[4]||(e[4]=[v("Sign Up")])),_:1})]),c(o(M),{onSubmit:L,"validation-schema":o(E)},{default:b(({errors:a})=>[e[8]||(e[8]=s("label",{for:"email"},"Email Address",-1)),c(o(k),{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=l=>i.value=l),type:"email",name:"Email",id:"email",class:"input",placeholder:"Enter Your Email Address"},null,8,["modelValue"]),s("p",O,x(a==null?void 0:a.Email),1),e[9]||(e[9]=s("label",{for:"password"},"Password",-1)),s("div",Q,[c(o(k),{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l),type:u.value?"text":"password",name:"Password",id:"password",class:"text-gray-900 placeholder:text-gray-400 focus:outline-none w-full",placeholder:"Enter Your Password"},null,8,["modelValue","type"]),s("div",{class:"pl-2",onClick:e[2]||(e[2]=l=>u.value=!u.value)},[u.value?(f(),w(o(j),{key:0,class:"password-icon"})):(f(),w(o(q),{key:1,class:"password-icon"}))])]),s("p",T,x(a==null?void 0:a.Password),1),s("label",G,[P(s("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>d.value=l),type:"checkbox",id:"remember",class:"w-4 h-4 cursor-pointer"},null,512),[[R,d.value]]),e[6]||(e[6]=v(" Remember Me "))]),s("button",{type:"submit",class:"button flex items-center justify-center w-full mt-10",disabled:m.value},[e[7]||(e[7]=v(" Login ")),m.value?(f(),w(o(F),{key:0,class:"loading-btn"})):B("",!0)],8,H)]),_:1},8,["validation-schema"])]),e[11]||(e[11]=s("div",{class:"auth-img-box"},[s("img",{src:z,alt:"Login",class:"full-image"})],-1))])])}}};export{ae as default};
