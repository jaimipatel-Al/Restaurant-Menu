import{_ as L,x as N,y as j,r as c,z as q,c as p,b as n,f as w,t as y,e as _,w as D,i as d,R as z,m as $,n as V,p as h,a as O,o,l as i,j as k,A as S}from"./index-e9uV_RJ-.js";import{c as Y,a as U,F as G,b as T}from"./index.esm-DzTv-fv4.js";import{r as P}from"./ArrowUpTrayIcon-BTsZDYuX.js";import{r as H}from"./XMarkIcon-DjUejM8q.js";import{r as J}from"./ArrowPathIcon-D9-DHQV_.js";const K={class:"bg-screen flex items-center justify-end add-edit-form"},M={class:"w-full sm:w-2/3 md:w-1/3 shadow-2xl m-5 sm:m-10 md:m-16 p-4 sm:p-6 md:p-8",style:{background:"rgb(250, 200, 200, 0.25)","min-width":"300px"}},Q={class:"main-title"},W={class:"auth-detail"},X={key:0,class:"input-shimmer"},Z={key:2,class:"error-message"},ee={key:3,class:"textarea-shimmer"},ae={key:5,class:"error-message"},te={key:6,for:"image",style:{display:"flex"},class:"items-center"},se={key:7,class:"relative mt-2 sm:mt-2 md:mt-4 w-16 sm:w-20 md:w-24 h-16 sm:h-20 md:h-24"},le=["src"],oe=["disabled"],ie={__name:"AddEditCategory",setup(ne){const C=j(),b=O(),E=Y({Title:U().required().max(50),Description:U().required().max(500)}),u=N(()=>{var a;return(a=C==null?void 0:C.params)==null?void 0:a.id}),g=c(""),f=c(""),x=c(),r=c(),m=c(),v=c(!1),l=c(!1),F=a=>{const e=a.target.files[0];e&&(r.value=e,m.value=URL.createObjectURL(e))},R=()=>{m.value=null,r.value=null,x.value.value=null},A=async()=>{l.value=!0,await $.get(`${V.getCategory}${u.value}`).then(({data:a})=>{let e=a.data;g.value=e.title,f.value=e.description,m.value=e.image}).catch(a=>{var e,t;h.error((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message),b.push("/category")}).finally(()=>{l.value=!1})},B=async()=>{v.value=!0;let a=new FormData;a.append("title",g.value),a.append("description",f.value),r.value&&a.append("image",r.value),await $.post(V.createCategory,a,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{h.success("Category created successfully!!"),b.push("/category")}).catch(e=>{var t,s;h.error((s=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:s.message)}).finally(()=>{v.value=!1})},I=async()=>{v.value=!0;let a=new FormData;a.append("title",g.value),a.append("description",f.value),(r.value||!m.value&&!r.value)&&a.append("image",r.value),await $.put(`${V.updateCategory}${u.value}`,a,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{h.success("Category updated successfully!!"),b.push("/category")}).catch(e=>{var t,s;h.error((s=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:s.message)}).finally(()=>{v.value=!1})};return q(u,()=>{u.value&&A()},{immediate:!0}),(a,e)=>(o(),p("section",K,[n("div",M,[n("h1",Q,y(u.value?"Update ":"Add ")+" Category",1),n("p",W,[_(" Organize your menu effortlessly by "+y(u.value?"updating  ":"adding  ")+" food categories! ",1),w(d(z),{to:"/category",class:"route-link"},{default:D(()=>e[5]||(e[5]=[_("Back to Category list")])),_:1})]),w(d(G),{onSubmit:e[4]||(e[4]=t=>u.value?I():B()),"validation-schema":d(E)},{default:D(({errors:t})=>[e[7]||(e[7]=n("label",{for:"title"},"Title",-1)),l.value?(o(),p("p",X)):i("",!0),l.value?i("",!0):(o(),k(d(T),{key:1,modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=s=>g.value=s),type:"text",name:"Title",id:"title",class:"input",placeholder:"Enter Your Title"},null,8,["modelValue"])),l.value?i("",!0):(o(),p("p",Z,y(t==null?void 0:t.Title),1)),e[8]||(e[8]=n("label",{for:"description"},"Description",-1)),l.value?(o(),p("p",ee)):i("",!0),l.value?i("",!0):(o(),k(d(T),{key:4,modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=s=>f.value=s),name:"Description"},{default:D(({field:s})=>[n("textarea",S(s,{id:"description",class:"input h-40",placeholder:"Enter Your Description"}),null,16)]),_:1},8,["modelValue"])),l.value?i("",!0):(o(),p("p",ae,y(t==null?void 0:t.Description),1)),l.value?i("",!0):(o(),p("label",te,[e[6]||(e[6]=_(" Upload Image ")),m.value?i("",!0):(o(),k(d(P),{key:0,class:"upload-button mx-2",onClick:e[2]||(e[2]=s=>x.value.click())})),n("input",{type:"file",accept:"image/*",ref_key:"file",ref:x,hidden:"",onChange:F},null,544)])),m.value&&!l.value?(o(),p("div",se,[w(d(H),{class:"remove-image",onClick:e[3]||(e[3]=s=>R())}),n("img",{src:m.value,alt:"Uploaded Image",class:"uploaded-img-box"},null,8,le)])):i("",!0),n("button",{type:"submit",disabled:v.value||l.value},[_(y(u.value?"Edit ":"Add ")+" Category ",1),v.value?(o(),k(d(J),{key:0,class:"loading-btn"})):i("",!0)],8,oe)]),_:1},8,["validation-schema"])])]))}},pe=L(ie,[["__scopeId","data-v-b7d8e40c"]]);export{pe as default};
