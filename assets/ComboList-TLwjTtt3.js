import{_ as L,u as M,r as p,g as E,c as i,b as a,f as b,w as N,i as u,R as j,l as R,e as f,F as $,s as w,m as h,n as y,a as U,o as n,B as z,C,t as F,k,v as D,j as H,p as m}from"./index-CDsh9h_7.js";import{_ as q}from"./AddEditIcon-Cy7kyXRe.js";import{_ as O}from"./ComboItems-ifK7GnC5.js";import{r as G}from"./NoSymbolIcon-BDiQSZAV.js";import{r as J}from"./ArrowPathIcon-BuiWCPep.js";import{r as K}from"./PlusIcon-C9GS-IBQ.js";import"./TrashIcon-DVPzPqn4.js";import"./default-item-BsiDVC9R.js";import"./XMarkIcon-Ot23MzQE.js";const P="/Restaurant-Menu/assets/default-combo-BEbpSuTs.jpg",Q={class:"bg-screen"},W={class:"main-header-nav"},X={key:0,class:"no-data"},Y=["src"],Z={key:1,src:P,class:"full-image",alt:"Combo Image"},ee={class:"price"},se={class:"flex items-start justify-between flex-wrap pt-1 sm:pt-3 md:pt-5"},te=["for"],oe=["onUpdate:modelValue","id","onChange"],ae=["for"],le=["onUpdate:modelValue","id","onChange"],ne={class:"flex items-start justify-start overflow-x-auto w-full"},ie={key:2,class:"no-data"},re={__name:"ComboList",setup(ce){const I=U(),S=M(),c=p(!1),r=p([]),x=p(),v=p(0),g=p(),_=async()=>{var o;((o=r.value)==null?void 0:o.length)!=g.value&&(v.value++,c.value=!0,await h.get(`${y.listCombo}?page=${v.value}&limit=4`).then(({data:s})=>{const t=s.data;g.value=t.totalMenus;const e=t.menus.map(d=>({...d,isDeleting:!1}));r.value=[...r.value,...e]}).catch(s=>{var t,e;console.error((e=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:e.message)}).finally(()=>{c.value=!1}))},A=async o=>{o.isDeleting=!0,await h.delete(`${y.deleteCombo}${o._id}`).then(()=>{m.success("Combo deleted successfully!!"),v.value=0,g.value=null,r.value=[],_()}).catch(s=>{var t,e;m.error((e=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:e.message)}).finally(()=>{o.isDeleting=!1})},T=async o=>{await h.patch(`${y.toggleComboAvailability}${o._id}`).then(()=>{m.success("Combo Availability Changed successfully!!")}).catch(s=>{var t,e;m.error((e=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:e.message)})},V=async o=>{await h.post(`${y.selectToday}${o._id}`).then(()=>{m.success("Combo's Today's Special Option Changed successfully!!"),v.value=0,g.value=null,r.value=[],_(),c.value=!1}).catch(s=>{var t,e;m.error((e=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:e.message)})},B=()=>{const o=x.value;o&&o.scrollHeight-o.scrollTop<=o.clientHeight+50&&!c.value&&_()};return E(()=>{_(),x.value.addEventListener("scroll",B)}),(o,s)=>{var t;return n(),i("section",Q,[a("div",W,[s[1]||(s[1]=a("h1",{class:"main-title"},"Combo",-1)),b(u(j),{to:"/combo/add-combo",class:"add-btn"},{default:N(()=>[b(u(K)),s[0]||(s[0]=f(" Add Combo"))]),_:1})]),a("div",{ref_key:"scrollComponent",ref:x,class:"h-5/6 overflow-y-auto"},[((t=r.value)==null?void 0:t.length)==0&&!c.value?(n(),i("div",X,[b(u(G),{class:"no-data-icon"}),s[2]||(s[2]=f(" No Combo Available "))])):(n(!0),i($,{key:1},w(r.value,(e,d)=>(n(),i("div",{key:e._id,class:"sm:grid grid-cols-3 grid-rows-3 grid-container pa-10 shadow-2xl",style:z(`background: ${d%2==1?"rgb(255, 255, 255, 0.8)":"rgba(250, 200, 150, 0.6)"}`)},[a("div",{class:C(`row-start-1 row-end-4 flex-none ${d%2==1?"col-start-3 col-end-4  flex-none":""}`)},[e.image&&e.image!="null"&&e.image!="undefined"?(n(),i("img",{key:0,src:e.image,alt:"Combo Image",class:"full-image"},null,8,Y)):(n(),i("img",Z))],2),a("div",{class:C(`flex-auto pa-5 ${d%2==1?"col-start-1 col-end-3":"col-start-2 col-end-4 "}`)},[b(q,{title:e.name,isShow:e.createdBy==u(S).userData.userId,onEditItem:l=>u(I).push(`/combo/edit-combo/${e._id}`),onDeleteItem:l=>A(e),isDeleting:e.isDeleting},null,8,["title","isShow","onEditItem","onDeleteItem","isDeleting"]),a("p",ee,"â‚¹ "+F(e.price)+" /-",1),a("div",se,[a("label",{for:`available-${e._id}`,class:"flex items-center font-semibold text-xs sm:text-base md:text-xl"},[k(a("input",{"onUpdate:modelValue":l=>e.isActive=l,type:"checkbox",id:`available-${e._id}`,class:"w-4 sm:w-6 h-4 sm:h-6 cursor-pointer mr-2",onChange:l=>T(e)},null,40,oe),[[D,e.isActive]]),s[3]||(s[3]=f(" Available "))],8,te),a("label",{for:`today-combo-${e._id}`,class:"flex font-semibold text-xs sm:text-base md:text-xl"},[k(a("input",{"onUpdate:modelValue":l=>e.isTodayMenu=l,type:"checkbox",id:`today-combo-${e._id}`,class:"w-4 sm:w-6 h-4 sm:h-6 cursor-pointer mr-2",onChange:l=>V(e)},null,40,le),[[D,e.isTodayMenu]]),s[4]||(s[4]=f(" Is Add on Today's Special Combo? "))],8,ae)])],2),a("div",{class:C(`row-start-2 row-end-4 pa-5 ${d%2==1?"col-start-1 col-end-3":"col-start-2 col-end-4"}`)},[s[5]||(s[5]=a("p",{class:"text-gray-700 text-lg sm:text-xl md:text-2xl font-bold"},"Items",-1)),a("div",ne,[(n(!0),i($,null,w(e.subCategories,l=>(n(),H(O,{key:l,item:l},null,8,["item"]))),128))])],2)],4))),128)),c.value?(n(),i("div",ie,[b(u(J),{class:"no-data-icon"}),s[6]||(s[6]=f(" Loading..."))])):R("",!0)],512)])}}},he=L(re,[["__scopeId","data-v-106a90b5"]]);export{he as default};
