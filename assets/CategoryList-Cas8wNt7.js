import{_ as $,u as I,r as c,g as b,c as o,b as r,f as u,w as L,i,R as S,l as N,e as _,F as B,s as E,m as p,n as h,a as R,o as l,t as V,p as C}from"./index-CDsh9h_7.js";import{_ as A}from"./AddEditIcon-Cy7kyXRe.js";import{r as F}from"./NoSymbolIcon-BDiQSZAV.js";import{r as H}from"./ArrowPathIcon-BuiWCPep.js";import{r as M}from"./PlusIcon-C9GS-IBQ.js";import"./TrashIcon-DVPzPqn4.js";const T="/Restaurant-Menu/assets/default-category-fN7Sf7ck.png",q={class:"bg-screen"},j={class:"main-header-nav"},z={key:0,class:"no-data"},G={class:"h-48 md:h-58 w-full sm:w-72 md:w-64 flex-none"},J=["src"],K={key:1,src:T,alt:"Category Image"},O={class:"flex-auto p-2"},P={class:"auth-detail"},Q={key:2,class:"no-data"},U={__name:"CategoryList",setup(W){const x=R(),w=I(),d=c(!1),n=c([]),g=c(),m=c(0),f=c(),v=async()=>{var s;((s=n.value)==null?void 0:s.length)!=f.value&&(m.value++,d.value=!0,await p.get(`${h.listCategory}?page=${m.value}&limit=8`).then(({data:t})=>{const a=t.data;f.value=a.totalCategories;const e=a.categories.map(y=>({...y,isDeleting:!1}));n.value=[...n.value,...e]}).catch(t=>{var a,e;console.error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}).finally(()=>{d.value=!1}))},k=async s=>{s.isDeleting=!0,await p.delete(`${h.deleteCategory}${s._id}`).then(()=>{C.success("Category deleted successfully!!"),m.value=0,f.value=null,n.value=[],v()}).catch(t=>{var a,e;C.error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}).finally(()=>{s.isDeleting=!1})},D=()=>{const s=g.value;s&&s.scrollHeight-s.scrollTop<=s.clientHeight+50&&!d.value&&v()};return b(()=>{v(),g.value.addEventListener("scroll",D)}),(s,t)=>{var a;return l(),o("section",q,[r("div",j,[t[1]||(t[1]=r("h1",{class:"main-title"},"Category",-1)),u(i(S),{to:"/category/add-category",class:"add-btn"},{default:L(()=>[u(i(M)),t[0]||(t[0]=_(" Add Category"))]),_:1})]),r("div",{ref_key:"scrollComponent",ref:g,class:"h-5/6 overflow-y-auto"},[((a=n.value)==null?void 0:a.length)==0&&!d.value?(l(),o("div",z,[u(i(F),{class:"no-data-icon"}),t[2]||(t[2]=_(" No Category Available "))])):(l(!0),o(B,{key:1},E(n.value,e=>(l(),o("div",{key:e._id,class:"md:w-5/6 h-auto md:h-58 mx-8 md:mx-auto p-3 my-8 shadow-2xl rounded-xl flex sm:space-x-5 flex-col sm:flex-row",style:{background:"rgb(255, 255, 255, 0.8)"}},[r("div",G,[e.image&&e.image!="null"&&e.image!="undefined"?(l(),o("img",{key:0,src:e.image,alt:"Category Image",class:"full-image"},null,8,J)):(l(),o("img",K))]),r("div",O,[u(A,{title:e.title,isShow:e.createdBy==i(w).userData.userId,onEditItem:y=>i(x).push(`/category/edit-category/${e._id}`),onDeleteItem:y=>k(e),isDeleting:e.isDeleting},null,8,["title","isShow","onEditItem","onDeleteItem","isDeleting"]),r("p",P,V(e.description),1)])]))),128)),d.value?(l(),o("div",Q,[u(i(H),{class:"no-data-icon"}),t[3]||(t[3]=_(" Loading..."))])):N("",!0)],512)])}}},ae=$(U,[["__scopeId","data-v-d720eb06"]]);export{ae as default};
