import{_ as J}from"./default-item-BsiDVC9R.js";import{_ as K,r as x,W as O,g as U,c as d,b as o,l as X,f as c,e as _,i as I,w as Y,h as Z,F as tt,s as et,t as u,m as C,n as y,a as at,o as r,p as D}from"./index-CDsh9h_7.js";import{_ as st}from"./AddToCart-BqKtNEIJ.js";import{r as ot}from"./TrashIcon-DVPzPqn4.js";import{r as nt}from"./ArrowPathIcon-BuiWCPep.js";import{r as dt}from"./NoSymbolIcon-BDiQSZAV.js";import"./PlusIcon-C9GS-IBQ.js";const rt={class:"bg-screen"},lt={class:"main-header-nav"},mt={key:0,class:"no-data"},it={key:1,class:"no-data"},ut={key:2,class:"h-5/6 overflow-y-auto"},ct={class:"m-auto rounded-xl",style:{background:"rgb(255, 255, 255, 0.8)"}},pt={class:"table-pad flex space-x-1 sm:space-x-2 md:space-x-3 items-center"},gt={class:"h-10 w-10 sm:h-16 sm:w-16 md:h-24 md:w-24"},_t=["src"],It={key:1,src:J,alt:"Item Image",class:"uploaded-image"},Ct={class:"text-sm sm:text-base md:text-lg lg:text-xl font-semibold"},yt=["onClick"],vt={class:"quantity-cls font-semibold"},xt={class:"table-pad text-gray-700 text-xs sm:text-sm md:text-base lg:text-lg font-bold no-wrap"},bt={class:"table-pad"},ft={class:"table-pad price"},ht={class:"text-sm sm:text-base md:text-lg lg:text-xl font-bold border-t-2 border-gray-600"},kt={class:"table-pad price"},wt={__name:"FoodCart",setup(Lt){const E=at(),m=x([]),p=x(!1),v=O(),g=x(0),P=async()=>{p.value=!0,await C.get(y.getCart).then(({data:s})=>{var a;let t=s.data;m.value=(a=t.items)==null?void 0:a.map(n=>({...n,isCartLoading:!1})),g.value=t.totalAmount}).catch(s=>{var t,a;console.error((a=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:a.message)}).finally(()=>{p.value=!1})},W=async()=>{m.value=[],v.setCartValue(0),await C.delete(y.deleteCart).then(()=>{}).catch(s=>{var t,a;console.error((a=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:a.message)})},j=async s=>{s.isCartLoading=!0;let t={menuId:s.menuId._id,menuQuantity:1};await b(t)},z=async s=>{s.isCartLoading=!0;let t={itemId:s.itemId._id,itemQuantity:1};await b(t)},b=async s=>{await C.post(y.addCart,s).then(({data:t})=>{var n,l,e;let a=t.data;v.setCartValue(a.itemsCount),m.value=(l=(n=a.cart)==null?void 0:n.items)==null?void 0:l.map(i=>({...i,isCartLoading:!1})),g.value=(e=a.cart)==null?void 0:e.totalAmount}).catch(t=>{var a,n;D.error((n=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:n.message)})},G=async s=>{s.isCartLoading=!0;let t={menuId:s.menuId._id};await f(t)},H=async s=>{s.isCartLoading=!0;let t={itemId:s.itemId._id};await f(t)},f=async s=>{await C.delete(y.removeCart,{data:s}).then(({data:t})=>{var n,l,e;let a=t.data;v.setCartValue((a==null?void 0:a.itemsCount)??0),m.value=((l=(n=a==null?void 0:a.updatedCart)==null?void 0:n.items)==null?void 0:l.map(i=>({...i,isCartLoading:!1})))??[],g.value=((e=a==null?void 0:a.updatedCart)==null?void 0:e.totalAmount)??0}).catch(t=>{var a,n;D.error((n=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:n.message)})};return U(()=>{P()}),(s,t)=>{var n,l;const a=Z("RouterLink");return r(),d("section",rt,[o("div",lt,[t[2]||(t[2]=o("h1",{class:"main-title"},"Cart",-1)),!p.value&&((n=m.value)!=null&&n.length)?(r(),d("button",{key:0,class:"add-btn",onClick:t[0]||(t[0]=e=>W())},[c(I(ot)),t[1]||(t[1]=_(" Remove All From Cart "))])):X("",!0)]),p.value?(r(),d("div",mt,[c(I(nt),{class:"no-data-icon"}),t[3]||(t[3]=_(" Loading..."))])):((l=m.value)==null?void 0:l.length)==0?(r(),d("div",it,[c(I(dt),{class:"no-data-icon"}),t[5]||(t[5]=_(" No Item Available In Cart ")),c(a,{to:"/restaurant",class:"route-link ml-1 md:ml-2"},{default:Y(()=>t[4]||(t[4]=[_(" Add items")])),_:1})])):(r(),d("div",ut,[o("table",ct,[t[7]||(t[7]=o("tr",{class:"text-sm sm:text-base md:text-lg lg:text-xl font-bold border-b-2 border-gray-600"},[o("td",{class:"table-pad"},"Item"),o("td",{class:"table-pad"},"Price"),o("td",{class:"table-pad"},"Quantity"),o("td",{class:"table-pad"},"Total")],-1)),(r(!0),d(tt,null,et([...m.value],e=>{var i,h,k,w,L,A,F,$,B,V,R,T;return r(),d("tr",{key:e},[o("td",pt,[o("div",gt,[(i=e.menuId)!=null&&i.image&&e.menuId.image!="null"&&e.menuId.image!="undefined"||(h=e.itemId)!=null&&h.image&&e.itemId.image!="null"&&e.itemId.image!="undefined"?(r(),d("img",{key:0,src:((k=e.menuId)==null?void 0:k.image)||e.itemId.image,alt:"Item Image",class:"uploaded-image"},null,8,_t)):(r(),d("img",It))]),o("div",null,[o("h3",Ct,u(((w=e.menuId)==null?void 0:w.name)||((L=e.itemId)==null?void 0:L.title)),1),o("p",{class:"text-xs md:text-sm text-orange-600 font-semibold cursor-pointer hover:underline",onClick:q=>{var N,Q,M,S;return I(E).push(`/restaurant/${((Q=(N=e.menuId)==null?void 0:N.createdBy)==null?void 0:Q._id)||((S=(M=e.itemId)==null?void 0:M.createdBy)==null?void 0:S._id)}`)}},u(((F=(A=e.menuId)==null?void 0:A.createdBy)==null?void 0:F.name)||((B=($=e.itemId)==null?void 0:$.createdBy)==null?void 0:B.name)),9,yt),o("p",vt," Quantity : "+u(((R=(V=e.menuId)==null?void 0:V.subCategories)==null?void 0:R.length)||((T=e.itemId)==null?void 0:T.quantity)),1)])]),o("td",xt," ₹ "+u(e.price)+" /- ",1),o("td",bt,[c(st,{value:e.quantity,isLoading:e.isCartLoading,onRemoveItem:q=>e.menuId?G(e):H(e),onAddItem:q=>e.menuId?j(e):z(e)},null,8,["value","isLoading","onRemoveItem","onAddItem"])]),o("td",ft,"₹ "+u(e.price*e.quantity)+" /-",1)])}),128)),o("tr",ht,[t[6]||(t[6]=o("td",{colspan:"3",class:"table-pad text-end"},"Total Amount",-1)),o("td",kt,"₹ "+u(g.value)+" /-",1)])])]))])}}},qt=K(wt,[["__scopeId","data-v-c5d00c9b"]]);export{qt as default};
