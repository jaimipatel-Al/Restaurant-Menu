import{u as F,r as o,c as h,b as s,f as u,w as S,i as l,m as D,n as O,p as E,a as T,h as Y,o as i,k as I,e as b,q as z,l as V,j as r,t as p}from"./index-e9uV_RJ-.js";import{c as M,a as k,d as Z,F as G,b as U}from"./index.esm-DzTv-fv4.js";import{r as H}from"./ArrowUpTrayIcon-BTsZDYuX.js";import{r as J}from"./XMarkIcon-DjUejM8q.js";import{r as N,a as R}from"./EyeIcon-Dpwvfe44.js";import{r as K}from"./ArrowPathIcon-D9-DHQV_.js";const Q="/Restaurant-Menu/assets/signup-v7BsvPkL.jpg",W={class:"auth flex items-center"},X={class:"auth-box h-5/6"},ee={class:"flex-1 pa-10"},se={class:"sm:flex justify-between items-end sm:space-x-5 md:space-x-10"},ae={class:"flex-1"},te={class:"auth-detail"},le={class:"flex-1 text-end"},oe={for:"image",style:{display:"flex"},class:"items-center"},ne={key:0,class:"relative mt-2 sm:mt-2 md:mt-4 w-16 sm:w-20 md:w-24 h-16 sm:h-20 md:h-24"},ie=["src"],ue={for:"name"},de={class:"error-message"},re={class:"error-message"},me={class:"input bg-white flex-between"},pe={class:"error-message"},ce={class:"input bg-white flex-between"},ve={class:"error-message"},fe=["disabled"],Pe={__name:"SignUp",setup(we){const _=F(),q=T(),A=M({Name:k().required().max(50),Email:k().required().email(),Password:k().required().min(8).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$/,"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character"),ConfirmPassword:k().required("Confirm Password is required").oneOf([Z("Password"),""],"Passwords must match")}),P=o(""),c=o(""),v=o(""),$=o(""),f=o(!1),w=o(!1),d=o("customer"),g=o(!1),m=o(),y=o(),C=o(),L=async()=>{g.value=!0;let n=new FormData;n.append("name",P.value),n.append("email",c.value),n.append("password",v.value),n.append("userType",d.value),y.value&&n.append("image",y.value),await D.post(O.signUp,n,{headers:{"Content-Type":"multipart/form-data"}}).then(({data:e})=>{_.sessionStore({password:v.value,email:c.value}),E.success((e==null?void 0:e.message)??`${d.value=="customer"?"Customer ":"Owner "} Sign Up Success!`),q.push("/login")}).catch(e=>{var x,a;E.error(((a=(x=e==null?void 0:e.response)==null?void 0:x.data)==null?void 0:a.message)??"User Can't Sign Up!")}).finally(()=>{g.value=!1})},j=n=>{const e=n.target.files[0];e&&(y.value=e,m.value=URL.createObjectURL(e))},B=()=>{m.value=null,y.value=null,C.value.value=null};return(n,e)=>{const x=Y("RouterLink");return i(),h("main",W,[s("div",X,[e[20]||(e[20]=s("div",{class:"auth-img-box"},[s("img",{src:Q,alt:"Sign Up",class:"full-image"})],-1)),s("div",ee,[u(l(G),{onSubmit:e[9]||(e[9]=a=>L()),"validation-schema":l(A)},{default:S(({errors:a})=>[s("div",se,[s("div",ae,[e[13]||(e[13]=s("h1",{class:"main-title"},"Sign Up",-1)),s("p",te,[e[11]||(e[11]=b(" Already have an account? ")),u(x,{to:"/login",class:"route-link"},{default:S(()=>e[10]||(e[10]=[b("Login")])),_:1})]),e[14]||(e[14]=s("label",{for:"type"},"Register As",-1)),I(s("select",{name:"Type",id:"type","onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),class:"input"},e[12]||(e[12]=[s("option",{value:"owner"},"Owner",-1),s("option",{value:"customer"},"Customer",-1)]),512),[[z,d.value]])]),s("div",le,[s("label",oe,[e[15]||(e[15]=b(" Upload Image ")),m.value?V("",!0):(i(),r(l(H),{key:0,class:"upload-button mx-2",onClick:e[1]||(e[1]=t=>C.value.click())})),s("input",{type:"file",accept:"image/*",ref_key:"file",ref:C,hidden:"",onChange:j},null,544)]),m.value?(i(),h("div",ne,[u(l(J),{class:"remove-image",onClick:e[2]||(e[2]=t=>B())}),s("img",{src:m.value,alt:"Uploaded Image",class:"uploaded-img-box"},null,8,ie)])):V("",!0)])]),s("label",ue,p(d.value=="customer"?"User Name":"Restaurant Name"),1),u(l(U),{modelValue:P.value,"onUpdate:modelValue":e[3]||(e[3]=t=>P.value=t),type:"text",name:"Name",id:"name",class:"input",placeholder:`Enter Your ${d.value=="customer"?"User":"Restaurant"} Name`},null,8,["modelValue","placeholder"]),s("p",de,p(a==null?void 0:a.Name),1),e[17]||(e[17]=s("label",{for:"email"},"Email Address",-1)),u(l(U),{modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=t=>c.value=t),type:"email",name:"Email",id:"email",class:"input",placeholder:"Enter Your Email Address"},null,8,["modelValue"]),s("p",re,p(a==null?void 0:a.Email),1),e[18]||(e[18]=s("label",{for:"password"},"Password",-1)),s("div",me,[u(l(U),{modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=t=>v.value=t),type:f.value?"text":"password",name:"Password",id:"password",class:"text-gray-900 placeholder:text-gray-400 focus:outline-none w-full",placeholder:"Enter Your Password"},null,8,["modelValue","type"]),s("div",{class:"pl-2",onClick:e[6]||(e[6]=t=>f.value=!f.value)},[f.value?(i(),r(l(N),{key:0,class:"password-icon"})):(i(),r(l(R),{key:1,class:"password-icon"}))])]),s("p",pe,p(a==null?void 0:a.Password),1),e[19]||(e[19]=s("label",{for:"confirmPassword"},"Confirm Password",-1)),s("div",ce,[u(l(U),{modelValue:$.value,"onUpdate:modelValue":e[7]||(e[7]=t=>$.value=t),type:w.value?"text":"password",name:"ConfirmPassword",id:"confirmPassword",class:"text-gray-900 placeholder:text-gray-400 focus:outline-none w-full",placeholder:"Enter Your Confirm Password"},null,8,["modelValue","type"]),s("div",{class:"pl-2",onClick:e[8]||(e[8]=t=>w.value=!w.value)},[w.value?(i(),r(l(N),{key:0,class:"password-icon"})):(i(),r(l(R),{key:1,class:"password-icon"}))])]),s("p",ve,p(a==null?void 0:a.ConfirmPassword),1),s("button",{type:"submit",class:"button flex items-center justify-center w-full mt-8",disabled:g.value},[e[16]||(e[16]=b(" Sign Up ")),g.value?(i(),r(l(K),{key:0,class:"loading-btn"})):V("",!0)],8,fe)]),_:1},8,["validation-schema"])])])])}}};export{Pe as default};
